{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Jacob/Desktop/ph-timecard/ph-timecard/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Jacob/Desktop/ph-timecard/ph-timecard/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useState}from'react';import{PDFDocument}from'pdf-lib';import FileSaver from'file-saver';var Save=function Save(props){var timekeys=[\"MONIn\",\"TUEIn\",\"WEDIn\",\"THURIn\",\"FRIIn\",\"SATIn\",\"SUNIn\",\"MONOut\",\"TUEOut\",\"WEDOut\",\"THUROut\",\"FRIOut\",\"SATOut\",\"SUNOut\",\"MONIn_2\",\"TUEIn_2\",\"WEDIn_2\",\"THURIn_2\",\"FRIIn_2\",\"SATIn_2\",\"SUNIn_2\",\"MONOut_2\",\"TUEOut_2\",\"WEDOut_2\",\"THUROut_2\",\"FRIOut_2\",\"SATOut_2\",\"SUNOut_2\",\"MONIn_3\",\"TUEIn_3\",\"WEDIn_3\",\"THURIn_3\",\"FRIIn_3\",\"SATIn_3\",\"SUNIn_3\",\"MONOut_3\",\"TUEOut_3\",\"WEDOut_3\",\"THUROut_3\",\"FRIOut_3\",\"SATOut_3\",\"SUNOut_3\"];var fillForm=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,formPdfBytes,pdfDoc,form,pdfBytes;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url=props.pdf;_context.next=3;return fetch(url,{headers:{'Content-Type':'application/pdf'}}).then(function(res){console.log(res.headers);return res.arrayBuffer();});case 3:formPdfBytes=_context.sent;_context.next=6;return PDFDocument.load(formPdfBytes);case 6:pdfDoc=_context.sent;form=pdfDoc.getForm();console.log(form.getFields().map(function(f){return f.getName();}));Object.keys(props.timeCard).forEach(function(key){console.log(\"key:\".concat(key,\", value:\").concat(props.timeCard[key]));form.getTextField(key).setText(props.timeCard[key]);});Object.keys(props.daysOBJ).forEach(function(key,value){console.log(\"key:\".concat(key,\", value:\").concat(props.daysOBJ[key]));if(props.daysOBJ[key]){if(timekeys.includes(key)){console.log(\"found key:\".concat(key));var time24Hr=Number(props.daysOBJ[key].slice(0,2));var timeMn=props.daysOBJ[key].slice(3,5);if(time24Hr>12){var time12Hr=time24Hr-12;form.getTextField(key).setText(\"\".concat(time12Hr,\":\").concat(timeMn));}else{form.getTextField(key).setText(\"\".concat(time24Hr,\":\").concat(timeMn));};}else{form.getTextField(key).setText(props.daysOBJ[key]);};}});_context.next=13;return pdfDoc.saveAsBase64({dataUri:true});case 13:pdfBytes=_context.sent;props.setUpdatedPDF(pdfBytes);FileSaver.saveAs(pdfBytes,\"Time Card \".concat(props.timeCard[\"Name\"],\" for \").concat(props.timeCard[\"Pay Week Ending\"]),\"application/pdf\");case 16:case\"end\":return _context.stop();}}},_callee);}));return function fillForm(){return _ref.apply(this,arguments);};}();// return (<div>\n//             <button onClick={() => {fillForm()}}>Fill PDF</button>\n//         </div>);\n};export default Save;","map":{"version":3,"sources":["C:/Users/Jacob/Desktop/ph-timecard/ph-timecard/my-app/src/componets/Save.js"],"names":["React","useState","PDFDocument","FileSaver","Save","props","timekeys","fillForm","url","pdf","fetch","headers","then","res","console","log","arrayBuffer","formPdfBytes","load","pdfDoc","form","getForm","getFields","map","f","getName","Object","keys","timeCard","forEach","key","getTextField","setText","daysOBJ","value","includes","time24Hr","Number","slice","timeMn","time12Hr","saveAsBase64","dataUri","pdfBytes","setUpdatedPDF","saveAs"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\r\nimport { PDFDocument } from 'pdf-lib';\r\nimport FileSaver from 'file-saver';\r\n\r\n\r\nconst Save  = (props) => {\r\n\r\n    const timekeys = [\"MONIn\", \"TUEIn\", \"WEDIn\", \"THURIn\", \"FRIIn\", \"SATIn\", \"SUNIn\", \"MONOut\", \"TUEOut\", \"WEDOut\", \"THUROut\", \"FRIOut\", \"SATOut\", \"SUNOut\", \r\n    \"MONIn_2\", \"TUEIn_2\", \"WEDIn_2\", \"THURIn_2\", \"FRIIn_2\", \"SATIn_2\", \"SUNIn_2\", \"MONOut_2\", \"TUEOut_2\", \"WEDOut_2\", \"THUROut_2\", \"FRIOut_2\", \"SATOut_2\", \"SUNOut_2\",\r\n    \"MONIn_3\", \"TUEIn_3\", \"WEDIn_3\", \"THURIn_3\", \"FRIIn_3\", \"SATIn_3\", \"SUNIn_3\", \"MONOut_3\", \"TUEOut_3\", \"WEDOut_3\", \"THUROut_3\", \"FRIOut_3\", \"SATOut_3\", \"SUNOut_3\",\r\n    ]\r\n\r\n    const fillForm = async () => {\r\n        const url = props.pdf;\r\n        const formPdfBytes = await fetch(url,\r\n        {headers:{'Content-Type':'application/pdf'}})\r\n            .then(res => {\r\n                console.log(res.headers)\r\n                return (res.arrayBuffer())})\r\n        \r\n        const pdfDoc = await PDFDocument.load(formPdfBytes);\r\n\r\n        const form = pdfDoc.getForm();\r\n        console.log(form.getFields().map(f => f.getName()));\r\n        Object.keys(props.timeCard).forEach(key => {\r\n            console.log(`key:${key}, value:${props.timeCard[key]}`)\r\n            form.getTextField(key).setText(props.timeCard[key])\r\n        });\r\n        \r\n        Object.keys(props.daysOBJ).forEach((key, value) => {\r\n            console.log(`key:${key}, value:${props.daysOBJ[key]}`);\r\n            if (props.daysOBJ[key]) { \r\n                if (timekeys.includes(key)) {\r\n                    console.log(`found key:${key}`)\r\n                    const time24Hr = Number(props.daysOBJ[key].slice(0,2));\r\n                    const timeMn = props.daysOBJ[key].slice(3,5);\r\n                    if(time24Hr > 12) {\r\n                        const time12Hr = time24Hr - 12;\r\n                        form.getTextField(key).setText(`${time12Hr}:${timeMn}`);\r\n                    }else {form.getTextField(key).setText(`${time24Hr}:${timeMn}`)};}\r\n                else {form.getTextField(key).setText(props.daysOBJ[key])};\r\n            }\r\n        });\r\n\r\n        const pdfBytes = await pdfDoc.saveAsBase64({ dataUri: true });\r\n        props.setUpdatedPDF(pdfBytes);  \r\n        FileSaver.saveAs(pdfBytes, `Time Card ${props.timeCard[\"Name\"]} for ${props.timeCard[\"Pay Week Ending\"]}`, \"application/pdf\");\r\n    }\r\n\r\n    // return (<div>\r\n    //             <button onClick={() => {fillForm()}}>Fill PDF</button>\r\n    //         </div>);\r\n}\r\n\r\nexport default Save;"]},"metadata":{},"sourceType":"module"}