{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Jacob/Desktop/ph-timecard/ph-timecard/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Jacob/Desktop/ph-timecard/ph-timecard/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useState}from'react';import{PDFDocument}from'pdf-lib';import FileSaver from'file-saver';import{jsx as _jsx}from\"react/jsx-runtime\";var SavePDF=function SavePDF(props){var fillForm=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,formPdfBytes,pdfDoc,form,pdfBytes;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// let fileReader = new FileReader();\nurl=props.pdf;_context.next=3;return fetch(url,{headers:{'Content-Type':'application/pdf'}}).then(function(res){console.log(res.headers);return res.arrayBuffer();});case 3:formPdfBytes=_context.sent;_context.next=6;return PDFDocument.load(formPdfBytes);case 6:pdfDoc=_context.sent;form=pdfDoc.getForm();console.log(form.getFields().map(function(f){return f.getName();}));Object.keys(props.timeCard).forEach(function(key){console.log(\"key:\".concat(key,\", value:\").concat(props.timeCard[key]));form.getTextField(key).setText(props.timeCard[key]);});Object.keys(props.daysOBJ).forEach(function(key,value){console.log(\"key:\".concat(key,\", value:\").concat(props.daysOBJ[key]));if(props.daysOBJ[key]){form.getTextField(key).setText(props.daysOBJ[key]);};});_context.next=13;return pdfDoc.saveAsBase64({dataUri:true});case 13:pdfBytes=_context.sent;props.setUpdatedPDF(pdfBytes);FileSaver.saveAs(pdfBytes,\"pdf-lib_form_creation_example.pdf\",\"application/pdf\");case 16:case\"end\":return _context.stop();}}},_callee);}));return function fillForm(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){fillForm();},children:\"Fill PDF\"})});};export default SavePDF;","map":{"version":3,"sources":["C:/Users/Jacob/Desktop/ph-timecard/ph-timecard/my-app/src/componets/FillerButton.js"],"names":["React","useState","PDFDocument","FileSaver","SavePDF","props","fillForm","url","pdf","fetch","headers","then","res","console","log","arrayBuffer","formPdfBytes","load","pdfDoc","form","getForm","getFields","map","f","getName","Object","keys","timeCard","forEach","key","getTextField","setText","daysOBJ","value","saveAsBase64","dataUri","pdfBytes","setUpdatedPDF","saveAs"],"mappings":"qVAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,KAA8B,OAA9B,CACA,OAASC,WAAT,KAA4B,SAA5B,CACA,MAAOC,CAAAA,SAAP,KAAsB,YAAtB,C,2CAGA,GAAMC,CAAAA,OAAO,CAAI,QAAXA,CAAAA,OAAW,CAACC,KAAD,CAAW,CAExB,GAAMC,CAAAA,QAAQ,0FAAG,6KACb;AACMC,GAFO,CAEDF,KAAK,CAACG,GAFL,uBAGcC,CAAAA,KAAK,CAACF,GAAD,CAChC,CAACG,OAAO,CAAC,CAAC,eAAe,iBAAhB,CAAT,CADgC,CAAL,CAEtBC,IAFsB,CAEjB,SAAAC,GAAG,CAAI,CACTC,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACF,OAAhB,EACA,MAAQE,CAAAA,GAAG,CAACG,WAAJ,EAAR,CAA2B,CAJR,CAHd,QAGPC,YAHO,qCAaQd,CAAAA,WAAW,CAACe,IAAZ,CAAiBD,YAAjB,CAbR,QAaPE,MAbO,eAePC,IAfO,CAeAD,MAAM,CAACE,OAAP,EAfA,CAgBbP,OAAO,CAACC,GAAR,CAAYK,IAAI,CAACE,SAAL,GAAiBC,GAAjB,CAAqB,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACC,OAAF,EAAJ,EAAtB,CAAZ,EACAC,MAAM,CAACC,IAAP,CAAYrB,KAAK,CAACsB,QAAlB,EAA4BC,OAA5B,CAAoC,SAAAC,GAAG,CAAI,CACvChB,OAAO,CAACC,GAAR,eAAmBe,GAAnB,oBAAiCxB,KAAK,CAACsB,QAAN,CAAeE,GAAf,CAAjC,GACAV,IAAI,CAACW,YAAL,CAAkBD,GAAlB,EAAuBE,OAAvB,CAA+B1B,KAAK,CAACsB,QAAN,CAAeE,GAAf,CAA/B,EACH,CAHD,EAKAJ,MAAM,CAACC,IAAP,CAAYrB,KAAK,CAAC2B,OAAlB,EAA2BJ,OAA3B,CAAmC,SAACC,GAAD,CAAMI,KAAN,CAAgB,CAC/CpB,OAAO,CAACC,GAAR,eAAmBe,GAAnB,oBAAiCxB,KAAK,CAAC2B,OAAN,CAAcH,GAAd,CAAjC,GACA,GAAIxB,KAAK,CAAC2B,OAAN,CAAcH,GAAd,CAAJ,CAAwB,CAAEV,IAAI,CAACW,YAAL,CAAkBD,GAAlB,EAAuBE,OAAvB,CAA+B1B,KAAK,CAAC2B,OAAN,CAAcH,GAAd,CAA/B,EAAmD,EAChF,CAHD,EAtBa,uBA2BUX,CAAAA,MAAM,CAACgB,YAAP,CAAoB,CAAEC,OAAO,CAAE,IAAX,CAApB,CA3BV,SA2BPC,QA3BO,eA4Bb/B,KAAK,CAACgC,aAAN,CAAoBD,QAApB,EACAjC,SAAS,CAACmC,MAAV,CAAiBF,QAAjB,CAA2B,mCAA3B,CAAgE,iBAAhE,EA7Ba,uDAAH,kBAAR9B,CAAAA,QAAQ,0CAAd,CAgCA,mBAAQ,kCACI,eAAQ,OAAO,CAAE,kBAAM,CAACA,QAAQ,GAAG,CAAnC,sBADJ,EAAR,CAGH,CArCD,CAuCA,cAAeF,CAAAA,OAAf","sourcesContent":["import React, {useState} from 'react';\r\nimport { PDFDocument } from 'pdf-lib';\r\nimport FileSaver from 'file-saver';\r\n\r\n\r\nconst SavePDF  = (props) => {\r\n\r\n    const fillForm = async () => {\r\n        // let fileReader = new FileReader();\r\n        const url = props.pdf;\r\n        const formPdfBytes = await fetch(url,\r\n        {headers:{'Content-Type':'application/pdf'}})\r\n            .then(res => {\r\n                console.log(res.headers)\r\n                return (res.arrayBuffer())})\r\n        // fileReader.onload = function(e) {\r\n        //     // The file's text will be printed here\r\n        //     console.log(e.target.result)\r\n        //   };\r\n        \r\n        const pdfDoc = await PDFDocument.load(formPdfBytes);\r\n\r\n        const form = pdfDoc.getForm();\r\n        console.log(form.getFields().map(f => f.getName()));\r\n        Object.keys(props.timeCard).forEach(key => {\r\n            console.log(`key:${key}, value:${props.timeCard[key]}`)\r\n            form.getTextField(key).setText(props.timeCard[key])\r\n        });\r\n        \r\n        Object.keys(props.daysOBJ).forEach((key, value) => {\r\n            console.log(`key:${key}, value:${props.daysOBJ[key]}`);\r\n            if (props.daysOBJ[key]) { form.getTextField(key).setText(props.daysOBJ[key])};\r\n        });\r\n\r\n        const pdfBytes = await pdfDoc.saveAsBase64({ dataUri: true });\r\n        props.setUpdatedPDF(pdfBytes);  \r\n        FileSaver.saveAs(pdfBytes, \"pdf-lib_form_creation_example.pdf\", \"application/pdf\");\r\n    }\r\n\r\n    return (<div>\r\n                <button onClick={() => {fillForm()}}>Fill PDF</button>\r\n            </div>);\r\n}\r\n\r\nexport default SavePDF;"]},"metadata":{},"sourceType":"module"}